import data from '../exportData.json';
import { renderElementorTree } from '../../components/elementor/Renderer';

export default function Page({ params }) {
  const pages = (data as any).pages || [];
  const page = pages.find((p: any) => p.slug === params.slug);
  if (!page) return <div style={{ padding: 24 }}>Not found</div>;
  return (
    <main style={{ padding: 24 }}>
      <h1>{page.title || page.slug}</h1>
      {page.elementor_data && Array.isArray(page.elementor_data)
        ? renderElementorTree(page.elementor_data)
        : <div dangerouslySetInnerHTML={{ __html: page.content || '' }} />}
    </main>
  );
}

export function generateStaticParams() {
  const pages = (data as any).pages || [];
  return pages.map((p: any) => ({ slug: p.slug }));
}
